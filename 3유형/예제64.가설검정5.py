

■ 예제64. 가설검정5.두 모집단의 모평균 차이 검정: 독립표본, 분산이 다른 경우 (t 검정):


가설검정
 ├─ 정규분포를 따르는 경우
 │   ├─ 단일 모집단의 모평균 검정
 │   │    ├─ 분산을 아는 경우  →  Z 검정   
 │   │    └─ 분산을 모르는 경우 →  t 검정 
 │   ├─ 두 모집단의 모평균 차이 검정
 │   │    ├─ 독립 표본         →  t 검정  <---  😊 이 부분을 하고 있어요
 │   │    └─ 대응 표본         →  t 검정
 │   └─ 세 모집단 이상의 모평균 차이 검정
 │        → ANOVA
 └─ 정규분포를 따르지 않는 경우
      → 비모수적 가설 검정

--------------------------------
[두 모집단의 모평균 차이 검정: 독립표본 t-검정 (동분산 및 비동분산) 이론 정리]

1. 정의:
   - 두 모집단의 모평균 차이를 검정하는 독립표본 t-검정은 두 개의 독립적인 집단에서 얻은 표본을 이용하여,
     두 모집단의 평균이 통계적으로 유의미하게 다른지를 평가하는 검정 방법입니다.
     
2. 주요 가정:
   - 각 집단의 데이터는 정규분포를 따른다.
   - 두 집단은 서로 독립적이다.
   - 동분산 가정: 두 집단의 분산이 같다고 가정한다.
     - 동분산이 만족되는 경우: 독립표본 t-검정(동분산 가정, equal_var=True)을 사용합니다.
     - 동분산 가정이 만족되지 않을 경우: 웰치 t-검정(비동분산, equal_var=False)을 사용합니다.

3. 등분산성 검정:
   - 두 집단의 분산이 같은지를 확인하기 위해 레빈 검정(Levene test) 등을 사용합니다.
     - 귀무가설: 두 집단의 분산이 같다.
     - 대립가설: 두 집단의 분산이 다르다.

4. 검정통계량:

   - 동분산 가정 하에서:
         t = (X̄₁ - X̄₂) / (Sp * √(1/n₁ + 1/n₂))
     여기서,
         Sp = √[ ((n₁ - 1)*s₁² + (n₂ - 1)*s₂² ) / (n₁ + n₂ - 2) ]
         자유도(df) = n₁ + n₂ - 2

   - 비동분산(웰치) t-검정에서는 위 공식과 자유도가 수정됩니다.

     # 비동분산(웰치) t-검정에서는:
     t_welch = (X̄₁ - X̄₂) / ((s1**2 / n1) + (s2**2 / n2)) ** 0.5

     # 여기서, 자유도(df)는 다음과 같이 계산됨:
   df_welch = ((s1**2 / n1) + (s2**2 / n2)) ** 2 / (
       ((s1**2 / n1) ** 2) / (n1 - 1) + ((s2**2 / n2) ** 2) / (n2 - 1))

# df_welch는 실수값으로 계산되며, 정수로 반올림하지 않고 사용함
   
--------------------------------
[기출문제 정리]

"""
📌 기출문제 정리 - 빅데이터분석기사 필기
"""

=============================================================================
● 2023년 제6회 빅데이터분석기사 필기
=============================================================================
문제:  
독립표본 t-검정에서 등분산성 가정을 만족하지 않을 때 사용하는 방법은?  

  1) 웰치 t-검정  
  2) 윌콕슨 순위합 검정  
  3) 맨-휘트니 U 검정    
  4) 단일표본 t-검정  

정답:  

해설:  
- 등분산성 가정이 만족되지 않을 경우, 두 집단의 분산이 다르다는 점을 고려하여 **웰치 t-검정(Welch’s t-test)**을 사용합니다.  
- 일반적인 독립표본 t-검정은 두 집단의 분산이 같다고 가정하지만, 웰치 t-검정은 이 가정을 완화하여 보다 신뢰성 있는 결과를 제공합니다.  

=============================================================================
● 2022년 제5회 빅데이터분석기사 필기
=============================================================================
문제:  
독립표본 t-검정에서 등분산성 가정을 확인하기 위한 검정은?  

선택지:  
  1) 샤피로-윌크 검정  
  2) 레빈 검정  
  3) 콜모고로프-스미르노프 검정  
  4) 카이제곱 검정  

정답:   

해설:  
- **레빈 검정(Levene's test)**은 두 집단의 **분산이 동일한지 여부**를 검정하는 방법입니다.  
- 독립표본 t-검정에서는 등분산성을 가정하므로, 이 가정을 만족하는지 확인하는 데 레빈 검정이 사용됩니다.  
- 등분산성이 만족되지 않으면, 일반적인 t-검정 대신 **웰치 t-검정**을 수행하는 것이 적절합니다.  

=============================================================================
● 2021년 제2회 빅데이터분석기사 필기
=============================================================================
문제:  
독립표본 t-검정에서 두 집단의 분산이 다를 때 사용하는 Python 코드는?  

  1) stats.ttest_ind(group1, group2)  
  2) stats.ttest_ind(group1, group2, equal_var=False)  
  3) stats.ttest_rel(group1, group2)  
  4) stats.mannwhitneyu(group1, group2)  

정답: 

해설:  
- 기본적인 독립표본 t-검정은 `stats.ttest_ind(group1, group2)`로 수행되지만, 이 경우 **두 집단의 분산이 동일하다고 가정**합니다.  
- 두 집단의 **분산이 다를 경우**, `equal_var=False` 옵션을 설정하여 **웰치 t-검정**을 수행해야 합니다.  
- `stats.ttest_rel(group1, group2)`는 **대응표본 t-검정**에 사용되며, `stats.mannwhitneyu(group1, group2)`는 **비모수 검정**(Mann-Whitney U test)으로 t-검정과는 다른 방법입니다.  

--------------------------------
### [파이썬 코드 예제: 웰치 t-검정 (비동분산 가정)]

### 예제: 웰치 t-검정 수행 (우측 검정)
 
두 개의 그룹이 서로 다른 교수법을 적용했을 때 교수법 A가 교수법 B보다 효과적인지 검정하려 한다.  
교수법 A를 적용한 학생 10명의 평균 점수는 13.3점이고,  
교수법 B를 적용한 학생 10명의 평균 점수는 9.4점이다.  
각 그룹의 표준편차가 다르므로 **웰치 t-검정**을 사용하여 교수법 A가 교수법 B보다 평균 점수가 높은지 검정한다.

# 1. 가설 설정
# 귀무가설 (H₀): 교수법 A의 평균 점수는 교수법 B보다 크지 않다. (μ_A ≤ μ_B)
H0 = "μ_A ≤ μ_B"
# 대립가설 (H₁): 교수법 A의 평균 점수는 교수법 B보다 크다. (μ_A > μ_B)  # 우측 검정
H1 = "μ_A > μ_B"

# 2. 문제에서 주어진 값
group1 = np.array([12, 18, 8, 15, 10, 21, 14, 5, 17, 13])  # 교수법 A (분산이 큰 그룹)
group2 = np.array([9, 10, 8, 9, 11, 10, 9, 8, 10, 10])     # 교수법 B (분산이 작은 그룹)

# 답:

# [파이썬 코드 예제: 웰치 t-검정 (비동분산 가정)]
### 예제: 웰치 t-검정 수행 (우측 검정)
 
# 두 개의 그룹이 서로 다른 교수법을 적용했을 때 교수법 A가 교수법 B보다 효과적인지 검정하려 한다.  
# 교수법 A를 적용한 학생 10명의 평균 점수는 13.3점이고,  
# 교수법 B를 적용한 학생 10명의 평균 점수는 9.4점이다.  
# 각 그룹의 표준편차가 다르므로 **웰치 t-검정**을 사용하여 교수법 A가 교수법 B보다 평균 점수가 높은지 검정한다.

import numpy as np
import scipy.stats as stats
import matplotlib.pyplot as plt

#한글 폰트 설정 
plt.rc('font', family='Malgun Gothic')  # 윈도우 사용자이 한글깨짐 방지 
#plt.rc('font', family='Apple Gothic')  #맥 사용자
plt.rcParams['axes.unicode_minus'] = False  # 마이너스 기호 깨짐 방지 

# 1. 가설 설정
# 귀무가설 (H₀): 교수법 A의 평균 점수는 교수법 B보다 크지 않다. (μ_A ≤ μ_B)
H0 = "μ_A ≤ μ_B"
# 대립가설 (H₁): 교수법 A의 평균 점수는 교수법 B보다 크다. (μ_A > μ_B)  # 우측 검정
H1 = "μ_A > μ_B"

# 2. 문제에서 주어진 값 (분산이 확실히 다르도록 수정)
group1 = np.array([12, 18, 8, 15, 10, 21, 14, 5, 17, 13])  # 교수법 A (분산이 큰 그룹)
group2 = np.array([9, 10, 8, 9, 11, 10, 9, 8, 10, 10])     # 교수법 B (분산이 작은 그룹)






문제. 두 개의 그룹이 서로 다른 교수법을 적용했을 때 교수법 A가 교수법 B보다 덜 효과적인지 검정하려 한다.  
      교수법 A를 적용한 학생 10명의 평균 점수는 8.5점이고,  
      교수법 B를 적용한 학생 10명의 평균 점수는 12.7점이다.  
      각 그룹의 표준편차가 다르므로 **웰치 t-검정**을 사용하여 교수법 A가 교수법 B보다 평균 점수가 낮은지 검정한다.

# [파이썬 코드 예제: 웰치 t-검정 (비동분산 가정)]
### 예제: 웰치 t-검정 수행 (좌측 검정)
 
# 두 개의 그룹이 서로 다른 교수법을 적용했을 때 교수법 A가 교수법 B보다 덜 효과적인지 검정하려 한다.  
# 교수법 A를 적용한 학생 10명의 평균 점수는 8.5점이고,  
# 교수법 B를 적용한 학생 10명의 평균 점수는 12.7점이다.  
# 각 그룹의 표준편차가 다르므로 **웰치 t-검정**을 사용하여 교수법 A가 교수법 B보다 평균 점수가 낮은지 검정한다.

import numpy as np
import scipy.stats as stats
import matplotlib.pyplot as plt

#한글 폰트 설정 
plt.rc('font', family='Malgun Gothic')  # 윈도우 사용자이 한글깨짐 방지 
#plt.rc('font', family='Apple Gothic')  #맥 사용자
plt.rcParams['axes.unicode_minus'] = False  # 마이너스 기호 깨짐 방지 

# 1. 가설 설정
# 귀무가설 (H₀): 교수법 A의 평균 점수는 교수법 B보다 작지 않다. (μ_A ≥ μ_B)
H0 = "μ_A ≥ μ_B"
# 대립가설 (H₁): 교수법 A의 평균 점수는 교수법 B보다 작다. (μ_A < μ_B)  # 좌측 검정
H1 = "μ_A < μ_B"

# 2. 문제에서 주어진 값 (교수법 A의 점수가 B보다 낮도록 조정)
# 데이터 재설정 (A의 평균이 B보다 낮게)
group1 = np.array([7, 9, 6, 10, 8, 12, 7, 5, 11, 10])     # 교수법 A (분산이 큰 그룹, 평균 낮음)
group2 = np.array([12, 13, 11, 14, 12, 13, 12, 14, 13, 12])  # 교수법 B (분산이 작은 그룹, 평균 높음)


      
