
▣ 예제58.단순회귀_분석

"""
📌 공분산과 회귀분석의 관계 정리
"""

=============================================================================
📌 1. 공분산(Covariance)이란?
=============================================================================
   
- 두 변수 X와 Y가 함께 변화하는 정도를 나타내는 값.
- 수식: Cov(X, Y) = (1/n) * Σ (X_i - X̄)(Y_i - Ȳ)
- 공분산이 양수 → X 증가 시 Y도 증가하는 경향.
- 공분산이 음수 → X 증가 시 Y는 감소하는 경향.
- 공분산이 0에 가까움 → X와 Y 사이의 선형 관계가 약함.

🎨그림: https://github.com/oracleyu01/python_class/blob/main/3유형/공분산.png
   
공분산은 단위(scale)에 따라 값이 달라지므로 표준화한 값이 필요함.

✅ 상관계수(Correlation Coefficient)
- 수식: r = Cov(X, Y) / (σ_X * σ_Y)
- σ_X, σ_Y: 각각 X와 Y의 표준편차
- 상관계수 r은 -1에서 1 사이의 값을 가지며, |r|이 1에 가까울수록 강한 선형 관계를 의미함.

=============================================================================
📌 2. 공분산이 회귀분석과 어떻게 연결될까?
=============================================================================

🔹 단순 선형회귀에서 기울기(회귀계수) a 계산

- 회귀식: Y = aX + b
- 기울기 a = Cov(X, Y) / Var(X)
- Cov(X, Y): X와 Y의 공분산
- Var(X): X의 분산 (Var(X) = (1/n) * Σ (X_i - X̄)²)

🎨그림: https://github.com/oracleyu01/python_class/blob/main/3유형/단순회귀.png

✅ 공분산과 회귀분석의 관계 요약

- 공분산이 양수 → X와 Y가 양의 관계 → 기울기 a도 양수
- 공분산이 음수 → X와 Y가 음의 관계 → 기울기 a도 음수
- 공분산이 0 → X와 Y가 독립적 → 기울기 a도 0

=============================================================================
📌 3. 공분산을 알아야 하는 이유
=============================================================================

✅ 회귀 계수(기울기) 계산에 직접 사용됨
   - 기울기 a = Cov(X, Y) / Var(X)

✅ 변수 간 관계(양의 관계 or 음의 관계)를 파악하는 기본 개념
   - 공분산이 양수 → 양의 관계
   - 공분산이 음수 → 음의 관계

✅ 상관계수와 연관됨
   - 공분산을 표준화한 값이 상관계수 r.
   - 상관계수가 높을수록 회귀 모델의 설명력이 높아짐.

✅ 다중회귀분석에서 다중공선성 문제 이해에 필요
   - 독립변수 간 공분산이 크면 다중공선성(multicollinearity) 문제 발생.

🚀 즉, 공분산을 이해하면 변수 간 관계를 더 깊이 분석할 수 있으며,  
    회귀 분석을 제대로 해석하는 데 필수적인 개념!


"""
📌 회귀분석(Regression Analysis) 정리
"""

=============================================================================
📌 1. 회귀분석이란?
=============================================================================

- 회귀분석(Regression Analysis)은 독립변수(X)와 종속변수(Y) 간의 관계를 모델링하는 기법.
- 데이터에서 패턴을 찾아 미래 값을 예측하거나 변수 간 관계를 분석하는 데 사용됨.
- 일반적으로 최소제곱법(Least Squares Method, LSE)을 사용하여 최적의 회귀선을 찾음.

✅ 회귀분석의 핵심 목표  
  - 변수 간의 관계를 파악 (상관성 분석)  
  - 종속변수를 독립변수로 예측 (미래 예측)  
  - 모델의 적합성을 평가 (설명력 및 유의성 검증)  

=============================================================================
📌 2. 회귀분석의 종류
=============================================================================

🔹 단순 선형 회귀(Simple Linear Regression)  
  - 독립변수가 하나인 경우.  
  - 회귀식:  
    Y = aX + b  
  - 기울기(a): X가 1 증가할 때 Y가 변하는 평균적인 값.  
  - 절편(b): X가 0일 때 Y의 예상값.  
     
🔹 다중 선형 회귀(Multiple Linear Regression)  
  - 독립변수가 여러 개인 경우.  
  - 회귀식:  
    Y = a₁X₁ + a₂X₂ + ... + aₙXₙ + b  
  - 여러 개의 변수 간 관계를 분석하고 예측력을 높이는 데 활용됨.  

🔹 다항 회귀(Polynomial Regression)  
  - X와 Y의 관계가 곡선 형태일 때 사용.  
  - 예:  
    Y = aX² + bX + c  
  - 데이터가 비선형 관계를 가질 때 유용함.  

🔹 로지스틱 회귀(Logistic Regression)  
  - 종속변수가 범주형(이진 또는 다중 클래스)인 경우 사용.  
  - 예측값을 확률로 변환하여 분류 문제에 활용.  
  - 시그모이드 함수 적용:  
    P(Y=1) = 1 / (1 + e^-(aX+b))  

=============================================================================
📌 3. 회귀분석의 핵심 개념
=============================================================================

✅ 잔차(Residual)  
  - 실제 값과 회귀모델의 예측 값 간 차이.  
  - 잔차가 작을수록 모델이 데이터를 잘 설명함.

🎨그림: https://github.com/oracleyu01/python_class/blob/main/3유형/단순회귀.png

✅ 최소제곱법(Least Squares Method, LSE)  
  - 잔차 제곱합(SSE, Sum of Squared Errors)을 최소화하는 기법.  
  - 최적의 회귀계수를 찾는 데 사용됨.  

🎨그림: https://github.com/oracleyu01/python_class/blob/main/3유형/최소제곱법.png
     
✅ 결정계수(R², Coefficient of Determination)  
  - 모델의 설명력을 나타내는 지표로 0에서 1 사이 값을 가짐.  
  - R² = 1 - (SSE / SST)  
  - 값이 1에 가까울수록 모델의 설명력이 높음.  
  - SSE (Sum of Squared Errors, 잔차 제곱합) : 모델이 예측하지 못한 오차의 크기.
  - SST (Total Sum of Squares, 총 변동합) : 데이터의 전체 변동성을 나타내는 값

🎨그림: https://github.com/oracleyu01/python_class/blob/main/3유형/결정계수.png

✅ 다중공선성(Multicollinearity)  
  - 독립변수 간 상관관계가 높으면 회귀모델의 신뢰성이 낮아짐.  
  - VIF(Variance Inflation Factor)를 활용하여 다중공선성을 확인함.  


문제1.공분산에 대한 설명으로 옳은 것은?
    (2023년 제6회 빅데이터분석기사 필기)

1. X, Y가 독립이면, Cov(X,Y)=0이다
2. Cov(X,Y)=0이면, X와 Y는 항상 독립이다
3. Cov(X,Y)는 측정 단위와 무관하다
4. Cov(X,Y)<0이면, X값이 상승할 때 Y값도 상승한다

 정답: 


문제2. 다중선형회귀분석에서 다중공선성(multicollinearity)에 대한 설명으로 옳은 것은?
      (2023년 제5회 빅데이터분석기사 필기)

1.독립변수 간 상관관계가 높을 때 발생하는 문제이다
2.분산팽창계수(VIF)가 1에 가까울수록 다중공선성이 심각하다
3.다중공선성이 있으면 회귀계수의 분산이 감소한다
4.다중공선성 해결을 위해 표본 크기를 줄이는 것이 효과적이다

정답: 


문제3. 두 변수 간의 공분산이 양수일 때의 해석으로 옳은 것은?
      (2021년 제2회 빅데이터분석기사 필기)

1.X값이 증가할 때 Y값은 감소하는 경향이 있다
2.X값이 증가할 때 Y값도 증가하는 경향이 있다
3.X와 Y는 서로 독립적인 관계이다
4.X와 Y는 비선형 관계이다

정답: 


■ 실습1. 탄닌 함유량과 애벌래 성장율 회귀 분석

import pandas as pd
import numpy as np
from sklearn.linear_model import LinearRegression
import statsmodels.api as sm
from statsmodels.formula.api import ols

# 1. 데이터를 불러옵니다.
df = pd.read_csv("c:\\data\\regression.txt", sep="\s+")
print(df.head())







😊문제1.  광고비와 매출간의 단순 회귀 분석 모델을 생성하고
           회귀 계수를 출력하시오 ! 

 데이터 있는곳:  https://cafe.daum.net/oracleoracle/Soei/68
 
 데이터: simple_hg.csv
 

답:




# 😊문제2. 미국 우주 왕복선 챌린져호의 폭파 원인을 단순회귀 분석으로 분석하시오!
# 목표: 온도가 O형링 파손에 얼마나 영향을 미치는지 데이터 분석

# 1. 데이터 불러오기
cha = pd.read_csv("c:\\data\\challenger.csv")
print(cha.head())

# 데이터 설명:
# distress_ct: o형링 파손수 
# temperature: 온도
# field_check_pressure: 압력
# flight_num: 비행기 번호


